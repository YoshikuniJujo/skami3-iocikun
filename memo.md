メモ
====

自動ログインについて
--------------------

### セッションクッキーの期限を長くする

セキュリティリスクが高くなる。
ので、だめ。

### 自動ログイン用のクッキーを用意する

* 手動ログイン時
	+ セッションクッキーを作成
		- 短めの有効期限(30分くらい?)
	+ 自動ログイン用のクッキーを作成
		- セッションクッキーより長くセキュアなものを
		- 長めの有効期限(1ヶ月くらい?)
	+ 自動ログイン用のクッキーも定期的に破棄される
		- 半月ごとに1ヶ月以上古いものを削除、くらいか
* セッションクッキーが有効なあいだはそれを利用
	+ セッションクッキーは定期的にデータベースから削除する
		- 1時間ごとに、30分以上古いものを削除、くらいか
* セッションクッキーが無効(クッキーがない、またはデータベースにない)
	+ 自動ログイン用のクッキーが使用される
		- 新たなセッションクッキーが作成される
		- 自動ログイン用のクッキーが破棄される
		- 自動ログイン用のクッキーをデータベースから削除する
		- 新しい自動ログイン用のクッキーを発行
			* クッキー
			* データベース
				+ データベースでは発行日時は変更しない
				+ つまり、自動ログインの若返りはなしとする
				+ 1ヶ月から1ヶ月半に1回は手動ログインが必要とする
* ユーザによるログアウト
	+ ふたつのクッキーの削除
	+ ふたつのクッキーをデータベースから削除
	+ つまり、ユーザによるログアウトは他端末からの自動ログインも無効とする
